<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="ISO-8859-1">
  <!-- <meta http-equiv="refresh" content="20"> -->
  <title>External API Data</title>
  <!-- <div th:text="${coinDataList}"></div> -->
</head>

<body>
  <!-- <title>High Chart</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      const chart = Highcharts.chart('container', {
          chart: {
              type: 'line'
          },
          title: {
              text: 'Stock Price'
          },
          xAxis: {
              categories: ['2024-01-01', '2024-01-02', '2024-01-03']
              // date:
          },
          yAxis: {
              title: {
                  text: 'Price'
              }
          },
          series: [{
              name: '700',
              data: [1, 10, 50]
          }, {
              name: '9988',
              data: [1, 30,60]
          }, {
              name: '700 - 2MA',
              data: [null,5.5,30]
          },{
              name: '9988 - 2MA',
              data: [null,15.5,45]
          }]
      });
  });
</script> -->

  <h1 th:text="'Bootcamp Thymeleaf ' + ${message} +' App'"></h1>
  <!-- <img src=/Users/jacobt21/Documents/github/sb-final-project-finance/demo-sb-thymleaf/src/main/resources/templates/512.webp> -->
  <div class="from-group">
    <label for="coinFilter">Filter by ID:</label>
    <input type="text" class="from-control" id="coinFilter" placeholder="Enter Coin ID">
  </div>
  <table>
    <thead>
        <tr>
            <th>Coin ID</th>
            <th>Image</th>
            <th>Current Price (USD)</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="coinData : ${coinDataList}" class="coinRow">
            <td th:text="${coinData.id}"></td>
            <td><img th:src="${coinData.image}" alt="/512.webp" height="50"></td>
            <td th:text="${coinData.current_price}"></td>
        </tr>
    </tbody>
  </table>
  <!-- <div id="container" style="width:100%; height:400px;"></div> -->

  <script>
    document.addEventListener('DOMContentLoaded',function(){
      var coinFilter = document.getElementById('coinFilter');
      var coinRows = document.querySelectorAll('.coinRow');

      coinFilter.addEventListener('input', function() {
        var filter = coinFilter.value.toUpperCase();

        coinRows.forEach(function (row) {
          var coinId = row.querySelector('td:nth-child(2)').textContent.toUpperCase();

          if (coinId.indexOf(filter) > -1) {
            row.style.display = ''; 
          } else {
            row.style.display = 'none';
          }
        });
      });
    });
  </script>

</body>

</html>